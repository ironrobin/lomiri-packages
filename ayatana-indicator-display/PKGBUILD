# Maintainer: Alex R <alex@ironrobin.net>

pkgname=ayatana-indicator-display
_pkgname=ayatana-indicator-display
pkgver=24.5.2
pkgrel=1
pkgdesc="Ayatana Indicator that helps with display rotate"
arch=("i686" "x86_64" "aarch64")
url="https://github.com/AyatanaIndicators"
license=("GPL3")
depends=("libayatana-common" "geoclue" "glib2" "accountsservice" "hicolor-icon-theme" "dconf" "systemd" "qt5-base" "gmock" "libqtdbustest" "libqtdbusmock")
makedepends=("libxrandr" "cmake-extras" "dbus" "intltool" "properties-cpp" "git" "cmake")
optdepends=("mate-ayatana-indicator-applet")
source=("https://github.com/AyatanaIndicators/ayatana-indicator-display/archive/refs/tags/24.5.2.tar.gz")
md5sums=("SKIP")
options=("!emptydirs")
provides=("${_pkgname}")
conflicts=("${_pkgname}")

# pkgver() {
#   cd ${_pkgname}
#   printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
# }

build()
{
    cd ${_pkgname}-${pkgver}
   cmake -DENABLE_RDA=OFF -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBEXECDIR=lib -DCMAKE_INSTALL_SYSCONFDIR=/etc
    make
}

package()
{
    cd ${_pkgname}-${pkgver}
    make DESTDIR="${pkgdir}" install
}