# Maintainer: Furkan Kardame <furkan@fkardame.com>

pkgname=ayatana-indicator-messages
pkgver=24.5.1
pkgrel=1
pkgdesc="Ayatana Indicator Messages Applet"
arch=(x86_64 aarch64 i686)
url="https://github.com/AyatanaIndicators/${pkgname}"
license=(GPL-3.0-or-later)

depends=(
  glib2                  # runtime + brings gdbus libs
  libayatana-indicator
  accountsservice
)
makedepends=(
  intltool
  cmake                  # you call cmake in build()
  python                 # /usr/bin/gdbus-codegen is a Python script
  glib2-devel                  # provides /usr/bin/gdbus-codegen at build time
  gdk-pixbuf2
  gtk3
  mate-common
  vala
  gobject-introspection
  pkgconf                # good practice for pkg-config
)

source=("https://github.com/AyatanaIndicators/${pkgname}/archive/${pkgver}.tar.gz")
sha256sums=('bbefac4a0c280b78f015d2afddc6d108f20cf6f8bfb1a35bd5e7fb0c6912a9bd')

build() {
  cmake -B build -S "${pkgname}-${pkgver}" \
    -DCMAKE_BUILD_TYPE=None \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBEXECDIR=lib \
    -Denable_tests=OFF
  cmake --build build
}

package() {
  DESTDIR="${pkgdir}" cmake --install build
}
