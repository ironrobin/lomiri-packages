From 3467f8aea9bf6cd7942f6788476cb529317c83cc Mon Sep 17 00:00:00 2001
From: Mike Gabriel <mike.gabriel@das-netzwerkteam.de>
Date: Fri, 11 Oct 2024 10:59:19 +0200
Subject: [PATCH] src/imports: Drop Lomiri.Keyboard QML module.

Signed-off-by: Mike Gabriel <mike.gabriel@das-netzwerkteam.de>
---
 src/imports/Lomiri/Keyboard/Keyboard.pro      |  29 -----
 .../Lomiri/Keyboard/inputmethodextensions.cpp | 123 ------------------
 .../Lomiri/Keyboard/inputmethodextensions.h   |  74 -----------
 src/imports/Lomiri/Keyboard/plugin.cpp        |  50 -------
 src/imports/Lomiri/Keyboard/plugin.h          |  50 -------
 src/imports/Lomiri/Keyboard/qmldir            |   2 -
 src/imports/Lomiri/Lomiri.pro                 |   7 -
 src/imports/imports.pro                       |   9 --
 src/src.pro                                   |   1 -
 9 files changed, 345 deletions(-)
 delete mode 100644 src/imports/Lomiri/Keyboard/Keyboard.pro
 delete mode 100644 src/imports/Lomiri/Keyboard/inputmethodextensions.cpp
 delete mode 100644 src/imports/Lomiri/Keyboard/inputmethodextensions.h
 delete mode 100644 src/imports/Lomiri/Keyboard/plugin.cpp
 delete mode 100644 src/imports/Lomiri/Keyboard/plugin.h
 delete mode 100644 src/imports/Lomiri/Keyboard/qmldir
 delete mode 100644 src/imports/Lomiri/Lomiri.pro
 delete mode 100644 src/imports/imports.pro

diff --git a/src/imports/Lomiri/Keyboard/Keyboard.pro b/src/imports/Lomiri/Keyboard/Keyboard.pro
deleted file mode 100644
index 39de9225..00000000
--- a/src/imports/Lomiri/Keyboard/Keyboard.pro
+++ /dev/null
@@ -1,29 +0,0 @@
-TEMPLATE = lib
-QT += qml quick gui
-CONFIG += qt plugin no_keywords
-TARGET = lomiri-keyboard-qml
-
-HEADERS += \
-    plugin.h \
-    inputmethodextensions.h \
-
-SOURCES += \
-    plugin.cpp \
-    inputmethodextensions.cpp \
-
-QMLDIR_FILE = qmldir
-
-# deployment rules for the plugin
-installPath = $$[QT_INSTALL_QML]/$$replace(uri, \\., /)Lomiri/Keyboard
-target.path = $$installPath
-
-qmldir_file.path = $$installPath
-qmldir_file.files = $$QMLDIR_FILE
-
-INSTALLS += target qmldir_file
-
-QMAKE_EXTRA_TARGETS += check
-check.target = check
-check.CONFIG = recursive
-
-
diff --git a/src/imports/Lomiri/Keyboard/inputmethodextensions.cpp b/src/imports/Lomiri/Keyboard/inputmethodextensions.cpp
deleted file mode 100644
index 1348aeb9..00000000
--- a/src/imports/Lomiri/Keyboard/inputmethodextensions.cpp
+++ /dev/null
@@ -1,123 +0,0 @@
-/*
- * This file is part of Maliit Plugins
- *
- * Copyright (C) 2014 Canonical Ltda
- *
- * Redistribution and use in source and binary forms, with or without modification,
- * are permitted provided that the following conditions are met:
- *
- * Redistributions of source code must retain the above copyright notice, this list
- * of conditions and the following disclaimer.
- * Redistributions in binary form must reproduce the above copyright notice, this list
- * of conditions and the following disclaimer in the documentation and/or other materials
- * provided with the distribution.
- * Neither the name of Nokia Corporation nor the names of its contributors may be
- * used to endorse or promote products derived from this software without specific
- * prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
- * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
- * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
- * THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
- * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- *
- */
-
-#include "inputmethodextensions.h"
-
-#include <QtCore>
-#include <QtGui>
-
-namespace Lomiri {
-namespace Keyboard {
-
-/*!
-    \qmltype InputMethod
-    \inqmlmodule Lomiri.Keyboard 0.1
-    \brief The InputMethod is a helper class used to attach properties used by Lomiri Keyboard into input fields
-
-    Example:
-    \qml
-    Item {
-        TextField {
-            id: field
-            InputMethod.extensions:  {
-                 'enterKeyText': 'My Enter',
-                 'enterKeyEnabled': true,
-                 'enterKeyHighlighted': true,
-            }
-        }
-    }
-    \endqml
-*/
-
-InputMethodExtension::InputMethodExtension(QObject *parent)
-    : QObject(parent),
-      m_inputText(0)
-{
-    m_inputText = findInput(parent);
-}
-
-/*!
-    Allow to change the default visual of the action Key, the value is a dictonary,
-    and the valid keys for the dictionary are:
-    \list
-    \li - enterKeyText (string) - The text to be displayed in the "Enter" key of the virtual keyboard
-    \li - enterKeyEnabled (boolean) - If the "Enter" key of the virtual keyboard should be enabled or not
-    \li - enterKeyHighlighted (boolean) - If the "Enter" key of the virtual keyboard should be highlighted or not
-    \endlist
-
-    \qmlproperty var extensions
-*/
-QVariantMap InputMethodExtension::inputMethodExtensions() const
-{
-    return m_extensions;
-}
-
-void InputMethodExtension::setInputMethodExtensions(const QVariantMap &map)
-{
-    if (m_extensions != map) {
-        m_extensions = map;
-        if (m_inputText) {
-            m_inputText->setProperty("__inputMethodExtensions", m_extensions);
-            qApp->inputMethod()->update(Qt::ImPlatformData);
-        }
-        Q_EMIT inputMethodExtensionsChanged();
-    }
-}
-
-QObject *InputMethodExtension::findInput(QObject *parent)
-{
-    static QStringList inputClasses;
-    if (inputClasses.isEmpty()) {
-        inputClasses << "QQuickTextInput"
-                     << "QQuickTextEdit";
-    }
-    Q_FOREACH(QObject *c, parent->children()) {
-        if (inputClasses.contains(c->metaObject()->className())) {
-            return c;
-        }
-        QObject *cc = findInput(c);
-        if (cc) {
-            return cc;
-        }
-    }
-    return 0;
-}
-
-InputMethod::InputMethod(QObject *parent)
-    : QObject(parent)
-{
-}
-
-InputMethodExtension *InputMethod::qmlAttachedProperties(QObject *obj)
-{
-    return new InputMethodExtension(obj);
-}
-
-} // namespace Lomiri
-} // namespace Keyboard
diff --git a/src/imports/Lomiri/Keyboard/inputmethodextensions.h b/src/imports/Lomiri/Keyboard/inputmethodextensions.h
deleted file mode 100644
index 670b9dba..00000000
--- a/src/imports/Lomiri/Keyboard/inputmethodextensions.h
+++ /dev/null
@@ -1,74 +0,0 @@
-/*
- * This file is part of Maliit Plugins
- *
- * Copyright (C) 2014 Canonical Ltda
- *
- * Redistribution and use in source and binary forms, with or without modification,
- * are permitted provided that the following conditions are met:
- *
- * Redistributions of source code must retain the above copyright notice, this list
- * of conditions and the following disclaimer.
- * Redistributions in binary form must reproduce the above copyright notice, this list
- * of conditions and the following disclaimer in the documentation and/or other materials
- * provided with the distribution.
- * Neither the name of Nokia Corporation nor the names of its contributors may be
- * used to endorse or promote products derived from this software without specific
- * prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
- * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
- * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
- * THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
- * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- *
- */
-
-#ifndef LOMIRI_KEYBOARD_EXTENSION_H
-#define LOMIRI_KEYBOARD_EXTENSION_H
-
-#include <QtCore>
-#include <QtQuick>
-
-namespace Lomiri {
-namespace Keyboard {
-
-class InputMethodExtension : public QObject
-{
-    Q_OBJECT
-    Q_PROPERTY(QVariantMap extensions READ inputMethodExtensions WRITE setInputMethodExtensions NOTIFY inputMethodExtensionsChanged)
-public:
-    InputMethodExtension(QObject *parent = 0);
-
-    QVariantMap inputMethodExtensions() const;
-    void setInputMethodExtensions(const QVariantMap &map);
-
-Q_SIGNALS:
-    void inputMethodExtensionsChanged();
-
-private:
-    QVariantMap m_extensions;
-    QObject *m_inputText;
-
-    QObject *findInput(QObject *parent);
-};
-
-class InputMethod : public QObject
-{
-    Q_OBJECT
-
-public:
-    InputMethod(QObject *parent = 0);
-
-    static InputMethodExtension *qmlAttachedProperties(QObject *obj);
-};
-
-} // namespace Lomiri
-} // namespace Keyboard
-
-QML_DECLARE_TYPEINFO(Lomiri::Keyboard::InputMethod, QML_HAS_ATTACHED_PROPERTIES)
-
-#endif
diff --git a/src/imports/Lomiri/Keyboard/plugin.cpp b/src/imports/Lomiri/Keyboard/plugin.cpp
deleted file mode 100644
index 6f4658b8..00000000
--- a/src/imports/Lomiri/Keyboard/plugin.cpp
+++ /dev/null
@@ -1,50 +0,0 @@
-/*
- * This file is part of Maliit Plugins
- *
- * Copyright (C) 2014 Canonical Ltda
- *
- * Redistribution and use in source and binary forms, with or without modification,
- * are permitted provided that the following conditions are met:
- *
- * Redistributions of source code must retain the above copyright notice, this list
- * of conditions and the following disclaimer.
- * Redistributions in binary form must reproduce the above copyright notice, this list
- * of conditions and the following disclaimer in the documentation and/or other materials
- * provided with the distribution.
- * Neither the name of Nokia Corporation nor the names of its contributors may be
- * used to endorse or promote products derived from this software without specific
- * prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
- * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
- * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
- * THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
- * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- *
- */
-
-#include "plugin.h"
-#include "inputmethodextensions.h"
-
-#include <QQmlEngine>
-
-namespace Lomiri {
-namespace Keyboard {
-
-void InputMethodExtensionPlugin::registerTypes(const char *uri)
-{
-    // @uri Lomiri.Keyboard
-#if QT_VERSION < QT_VERSION_CHECK(5, 15, 0)
-    qmlRegisterType<InputMethodExtension>();
-#else
-    qmlRegisterAnonymousType<InputMethodExtension>(uri, 0);
-#endif
-    qmlRegisterType<InputMethod>(uri, 0, 1, "InputMethod");
-}
-
-} // namespace Lomiri
-} // namespace Keyboard
diff --git a/src/imports/Lomiri/Keyboard/plugin.h b/src/imports/Lomiri/Keyboard/plugin.h
deleted file mode 100644
index 2e362c58..00000000
--- a/src/imports/Lomiri/Keyboard/plugin.h
+++ /dev/null
@@ -1,50 +0,0 @@
-/*
- * This file is part of Maliit Plugins
- *
- * Copyright (C) 2014 Canonical Ltda
- *
- * Redistribution and use in source and binary forms, with or without modification,
- * are permitted provided that the following conditions are met:
- *
- * Redistributions of source code must retain the above copyright notice, this list
- * of conditions and the following disclaimer.
- * Redistributions in binary form must reproduce the above copyright notice, this list
- * of conditions and the following disclaimer in the documentation and/or other materials
- * provided with the distribution.
- * Neither the name of Nokia Corporation nor the names of its contributors may be
- * used to endorse or promote products derived from this software without specific
- * prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
- * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
- * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
- * THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
- * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
- * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- *
- */
-
-#ifndef LOMIRI_KEYBOARD_INPUTMETHOD_EXTENSION_PLUGIN_H
-#define LOMIRI_KEYBOARD_INPUTMETHOD_EXTENSION_PLUGIN_H
-
-#include <QQmlExtensionPlugin>
-
-namespace Lomiri {
-namespace Keyboard {
-
-class InputMethodExtensionPlugin : public QQmlExtensionPlugin
-{
-    Q_OBJECT
-    Q_PLUGIN_METADATA(IID "org.qt-project.Qt.QQmlExtensionInterface")
-
-public:
-    void registerTypes(const char *uri);
-};
-
-} // namespace Lomiri
-} // namespace Keyboard
-
-#endif //LOMIRI_KEYBOARD_INPUTMETHOD_EXTENSION_PLUGIN_H
diff --git a/src/imports/Lomiri/Keyboard/qmldir b/src/imports/Lomiri/Keyboard/qmldir
deleted file mode 100644
index 299fcc1e..00000000
--- a/src/imports/Lomiri/Keyboard/qmldir
+++ /dev/null
@@ -1,2 +0,0 @@
-module Lomiri.Keyboard
-plugin lomiri-keyboard-qml
diff --git a/src/imports/Lomiri/Lomiri.pro b/src/imports/Lomiri/Lomiri.pro
deleted file mode 100644
index a154194b..00000000
--- a/src/imports/Lomiri/Lomiri.pro
+++ /dev/null
@@ -1,7 +0,0 @@
-CONFIG += ordered 
-TEMPLATE = subdirs
-SUBDIRS = Keyboard
-
-QMAKE_EXTRA_TARGETS += check
-check.target = check
-check.CONFIG = recursive
diff --git a/src/imports/imports.pro b/src/imports/imports.pro
deleted file mode 100644
index 8e4c6a77..00000000
--- a/src/imports/imports.pro
+++ /dev/null
@@ -1,9 +0,0 @@
-CONFIG += ordered 
-TEMPLATE = subdirs
-SUBDIRS = Lomiri
-
-
-
-QMAKE_EXTRA_TARGETS += check
-check.target = check
-check.CONFIG = recursive
diff --git a/src/src.pro b/src/src.pro
index 2ea2460c..84dc44cd 100644
--- a/src/src.pro
+++ b/src/src.pro
@@ -4,7 +4,6 @@ SUBDIRS = \
     lib \
     view \
     plugin \
-    imports \
 #    benchmark \
 
 
-- 
2.45.2
